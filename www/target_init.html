<ons-page id="target_init_html" class="target-page" 
          ng-device-backbutton="$($event.target).find('.button-ok').click()">
    <form ng-submit="ctl_target.set_target($event);
            ctl_activity.enter_from_target();">
        <ons-toolbar>
            <div class="center">{{ ctl_target.get_set_title()}}</div>
        </ons-toolbar>

        <!-- ======================================= -->

        <ons-list modifier="inset">
            <ons-list-item ng-repeat="data in ctl_target.status">
                <ons-row ng-init="setting = ctl_target.var.target_setting[$index]">
                    <ons-col class="title" ng-click="ctl_target.show_help(setting.key)">
                        {{ setting.title}}
                        <ons-icon icon="ion-ios-help-outline" fixed-width="true"></ons-icon>
                    </ons-col>

                    <ons-col width="50" style="text-align: right">
                        <ons-icon icon="ion-ios-minus-outline" fixed-width="true" 
                                  ng-click="ctl_target.change_target_number($event, -1)"></ons-icon>
                        <input min="{{ setting.min}}" max="{{ setting.max}}" type="number" 
                               value="{{ data.target}}"
                               target_key="{{setting.key}}"
                               style="width: 3rem;font-size: 1rem;text-align: center;" />
                        <ons-icon icon="ion-ios-plus-outline" fixed-width="true" 
                                  ng-click="ctl_target.change_target_number($event, 1)"></ons-icon>
                    </ons-col>
                </ons-row>
            </ons-list-item>
        </ons-list>

        <!-- ======================================= -->

        <ons-tabbar>
            <ons-tab label="{{ 'ONS_OK' | translate }}" 
                     onclick="$(this).parents('form').submit();"></ons-tab>
        </ons-tabbar>

        <!-- ======================================= -->

        <ons-modal var="target_help_modal" ng-click="target_help_modal.hide()">
            <img src="{{ ctl_target.var.target_help.help_img}}" />
            <div style="margin: 1rem;white-space: pre;">{{ ctl_target.var.target_help.help}}</div>
            <ons-button>{{ "ONS_OK" | translate }}</ons-button>
        </ons-modal>
    </form>
</ons-page>